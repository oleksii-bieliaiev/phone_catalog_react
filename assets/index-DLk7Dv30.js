import{r as i,G as g,j as e,I as _,i as y,L as C}from"./index-_AbkKq8r.js";import{P as x}from"./ProductsSlider-BogM57Kr.js";import"./ProductCard-3WC0gAcM.js";const u=[{image:"img/banners/new_banner_big1.svg",imageMobile:"img/banners/banner_small_1.svg",url:"phones"},{image:"img/banners/banner2.png",imageMobile:"img/banners/banner2.png",url:"tablets"},{image:"img/banners/banner1.png",imageMobile:"img/banners/banner1.png",url:"accessories"}],N=()=>{const[s,r]=i.useState(0),{theme:l}=i.useContext(g),t=i.useRef(null),c=u.length,d=i.useCallback(()=>{r(a=>(a+1)%c)},[c]),m=i.useCallback(()=>{r(a=>(a-1+c)%c)},[c]),n=i.useCallback(()=>{t.current&&clearInterval(t.current),t.current=setInterval(d,3500)},[d]);i.useEffect(()=>(n(),()=>{t.current&&clearInterval(t.current)}),[n]);const j=i.useCallback(a=>{r(a),n()},[n]),S=i.useCallback(()=>{d(),n()},[d,n]),v=i.useCallback(()=>{m(),n()},[m,n]);return e.jsxs("div",{className:"picturesSlider",children:[e.jsxs("div",{className:"picturesSlider__container",children:[e.jsx("div",{className:"picturesSlider__button",onClick:v,children:e.jsx(_,{icon:y.arrow_left[l]})}),e.jsx("div",{className:"picturesSlider__content",children:e.jsx("div",{className:"picturesSlider__container-image",children:u.map((a,o)=>{const h=s===o,p=e.jsxs("picture",{children:[e.jsx("source",{media:"(max-width: 1024px)",srcSet:a.imageMobile||a.image}),e.jsx("img",{src:a.image,alt:"Slide",className:h?"picturesSlider__image picturesSlider__image--active":"picturesSlider__image"})]});return h?e.jsx(C,{to:a.url,children:p},o):e.jsx("div",{style:{display:"none"},children:p},o)})})}),e.jsx("div",{className:"picturesSlider__button",onClick:S,children:e.jsx(_,{icon:y.arrow_right[l]})})]}),e.jsx("div",{className:"picturesSlider__dots",children:u.map((a,o)=>e.jsx("div",{className:s===o?"picturesSlider__dot picturesSlider__dot--active":"picturesSlider__dot",onClick:()=>j(o)},o))})]})},k=()=>{const{allProducts:s}=i.useContext(g),r=i.useMemo(()=>s.reduce((t,c)=>({...t,[c.category]:(t[c.category]||0)+1}),{}),[s]),l=[{path:"/phones",image:"img/Category for phones.png",title:"Mobile phones",alt:"Category Phones",count:r.phones||0},{path:"/tablets",image:"img/Category for tablets.png",title:"Tablets",alt:"Category Tablets",count:r.tablets||0},{path:"/accessories",image:"img/Category for accessories.png",title:"Accessories",alt:"Category Accessories",count:r.accessories||0}];return e.jsx("div",{className:"shopByCategory",children:e.jsxs("div",{className:"shopByCategory__container",children:[e.jsx("h2",{className:"shopByCategory__title",children:"Shop by category"}),e.jsx("div",{className:"shopByCategory__content",children:l.map(({path:t,image:c,title:d,alt:m,count:n})=>e.jsx(C,{to:t,className:"shopByCategory__link",children:e.jsxs("section",{className:"shopByCategory__block",children:[e.jsx("div",{className:"shopByCategory__block-image",children:e.jsx("img",{src:c,alt:m})}),e.jsx("h4",{className:"shopByCategory__block-title",children:d}),e.jsxs("span",{className:"shopByCategory__block-description",children:[n," models"]})]})},t))})]})})},b=20,f=(s,r)=>(s-r)/s*100,B=(s,r)=>r.year-s.year,P=(s,r)=>r.discount-s.discount,A=()=>{const{allProducts:s}=i.useContext(g),r=i.useMemo(()=>s!=null&&s.length?s.filter(t=>t.category==="phones").sort(B).slice(0,b):[],[s]),l=i.useMemo(()=>s!=null&&s.length?s.map(t=>({...t,discount:f(t.fullPrice,t.price)})).sort(P).slice(0,b):[],[s]);return e.jsxs("div",{className:"homePage",children:[e.jsx("h1",{className:"visually-hidden",children:"Product Catalog"}),e.jsx("h1",{className:"homePage__title",children:"Welcome to Nice Gadgets store!"}),e.jsx(N,{}),e.jsx(x,{title:"Brand new models",products:r,displayType:"fullPrice"}),e.jsx(k,{}),e.jsx(x,{title:"Hot prices",products:l,displayType:"with-discount"})]})};export{A as HomePage};
