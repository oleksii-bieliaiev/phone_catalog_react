import{r as d,G as j,b as y,j as e,c as _,I as k,i as b,d as F,e as S,a as I,L as T}from"./index-DbD7ckwr.js";import{B}from"./Breadcrumbs-Ej-MS7RG.js";import{P as A}from"./ProductsSlider-_ge_RvDV.js";import{B as L}from"./ButtonBack-AkFQuNRs.js";import{L as O}from"./Loader-DzbMfFwJ.js";import"./ProductCard-CsIkZiJ-.js";const D={graphite:"#383838",gold:"#FFD700",sierrablue:"#6CABDD",black:"#000000",rosegold:"#B76E79",silver:"#C0C0C0",spacegray:"#4B4F54",white:"#FFFFFF",yellow:"#FFFF00",red:"#FF0000",coral:"#FF7F50",midnight:"#2C3E50",purple:"#800080",spaceblack:"#1D1D1D",blue:"#0000FF",pink:"#FFC0CB",green:"#008000",midnightgreen:"#004953"},$=()=>{const{allProducts:a,addToCart:t,toggleFavorites:c}=d.useContext(j),i=d.useCallback(o=>a.find(s=>s.itemId===o),[a]),l=d.useCallback(o=>{const s=i(o.id);s&&t(s)},[t,i]),r=d.useCallback(o=>{const s=i(o.id);s&&c(s)},[c,i]);return{handleAddToCart:l,handleToggleFavorites:r}},E=a=>{const{cart:t,favorites:c}=d.useContext(j),i=d.useMemo(()=>t.some(r=>r.id===a.id),[t,a.id]),l=d.useMemo(()=>c.some(r=>r.itemId===a.id),[c,a.id]);return{isInCart:i,isFavorite:l}},M=(a,t)=>{const c=y(),i=d.useCallback((r,o)=>{const{color:s,namespaceId:n,capacity:g}=a,p=t.find(({color:h,namespaceId:v,capacity:x})=>v===n&&(r==="color"&&h===o&&x===g||r==="capacity"&&x===o&&h===s));return(p==null?void 0:p.id)??""},[a,t]);return{navigateToOption:d.useCallback((r,o)=>{const s=i(r,o),n=`/${a.category}/${s}`;c(n,{replace:!0})},[i,c,a.category])}},P=({label:a,value:t})=>e.jsxs("div",{className:"detailsPage__block",children:[e.jsx("span",{className:"detailsPage__info",children:a}),e.jsx("span",{className:"detailsPage__value",children:t})]}),w=({selectedProduct:a,specificProducts:t})=>{const{theme:c}=d.useContext(j),[i,l]=d.useState(0),{handleAddToCart:r,handleToggleFavorites:o}=$(),{isInCart:s,isFavorite:n}=E(a),{navigateToOption:g}=M(a,t),p=()=>e.jsxs("div",{className:"detailsPage__colors",children:[e.jsx("span",{className:"detailsPage__colors-title detailsPage__info",children:"Available colors"}),e.jsx("ul",{className:"detailsPage__colors-list",children:a.colorsAvailable.map(m=>e.jsx("li",{className:_("detailsPage__color-item",{"detailsPage__color-item--selected":a.color===m}),onClick:()=>g("color",m),style:{cursor:"pointer"},children:e.jsx("span",{className:"detailsPage__color-circle",style:{backgroundColor:D[m]}})},m))})]}),h=()=>e.jsxs("div",{className:"detailsPage__capacity",children:[e.jsx("span",{className:"detailsPage__capacity-title detailsPage__info",children:"Select capacity"}),e.jsx("ul",{className:"detailsPage__capacity-list",children:a.capacityAvailable.map(m=>{const u=a.capacity===m,C=m.replace("GB"," GB");return e.jsx("li",{className:_("detailsPage__capacity-item",{"detailsPage__capacity-item--selected":u}),onClick:()=>g("capacity",m),style:{cursor:"pointer"},children:e.jsx("span",{className:_("detailsPage__capacity-block",{"detailsPage__capacity-block--selected":u}),children:C})},m)})})]}),v=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"detailsPage__container-imageSlider",children:a.images.map((m,u)=>e.jsx("div",{className:_("detailsPage__container-photos",{"detailsPage__container-photos--active":i===u}),children:e.jsx("img",{src:`./${m}`,alt:`Thumbnail ${u+1}`,className:"detailsPage__photo",onClick:()=>l(u)})},u))}),e.jsx("div",{className:"detailsPage__photo-mask",children:a.images.map((m,u)=>e.jsx("img",{src:`./${m}`,alt:`Product view ${u+1}`,className:_("detailsPage__image",{"detailsPage__image--active":i===u})},u))})]}),x=()=>e.jsxs("div",{className:"detailsPage__container-buttons",children:[e.jsx("button",{className:_("detailsPage__button","detailsPage__button-card",{"detailsPage__button-card--active":s}),onClick:()=>r(a),children:s?"Added":"Add to cart"}),e.jsx("button",{className:_("detailsPage__button","detailsPage__button-favorites",{"detailsPage__button-favorites--active":n}),onClick:()=>o(a),children:e.jsx(k,{icon:n?b.favorites__filled[c]:b.favorites[c]})})]}),N=()=>e.jsxs("div",{className:"detailsPage__container-specifications",children:[e.jsx(P,{label:"Screen",value:a.screen}),e.jsx(P,{label:"Resolution",value:a.resolution}),e.jsx(P,{label:"Processor",value:a.processor}),e.jsx(P,{label:"RAM",value:a.ram})]});return e.jsxs("div",{className:"detailsPage__content-top",children:[v(),e.jsxs("div",{className:"detailsPage__characteristics",children:[p(),e.jsx("div",{className:"detailsPage__line"}),h(),e.jsx("div",{className:"detailsPage__line"}),e.jsxs("div",{className:"detailsPage__container-price",children:[e.jsxs("span",{className:"detailsPage__price-discount",children:["$",a.priceDiscount]}),e.jsxs("span",{className:"detailsPage__price-regular",children:["$",a.priceRegular]})]}),x(),N()]})]})},f=({title:a,className:t,children:c})=>e.jsxs("div",{className:t,children:[e.jsx("h3",{className:"detailsPage__block-title",children:a}),e.jsx("div",{className:"detailsPage__line-bottom"}),c]}),G=({label:a,value:t})=>e.jsxs("div",{className:"detailsPage__techSpecs-block",children:[e.jsx("span",{className:"detailsPage__techSpecs-title",children:a}),e.jsx("span",{className:"detailsPage__techSpecs-value",children:t})]}),R=a=>Array.isArray(a)?a.join(", "):a,Y=({selectedProduct:a})=>{const t=[{label:"Screen",value:a.screen??""},{label:"Resolution",value:a.resolution??""},{label:"Processor",value:a.processor??""},{label:"RAM",value:a.ram??""},{label:"Built in memory",value:a.capacity??""},{label:"Camera",value:a.camera??""},{label:"Zoom",value:a.zoom??""},{label:"Cell",value:a.cell??[]}];return e.jsxs("div",{className:"detailsPage__content-buttom",children:[e.jsx(f,{title:"About",className:"detailsPage__block-about",children:e.jsx("div",{className:"detailsPage__description",children:a.description.map((c,i)=>e.jsxs("div",{className:"detailsPage__section",children:[e.jsx("span",{className:"detailsPage__section-title",children:c.title}),e.jsx("span",{className:"detailsPage__section-description",children:c.text})]},i))})}),e.jsx(f,{title:"Tech specs",className:"detailsPage__block-techSpecs",children:e.jsx("div",{className:"detailsPage__techSpecs-content",children:t.map(({label:c,value:i})=>e.jsx(G,{label:c,value:R(i)},c))})})]})},z=500,H=(a,t)=>{const[c,i]=d.useState({currentProduct:null,categoryProducts:[],isLoading:!0,error:""}),l=d.useCallback((o,s)=>o.find(n=>n.id===s)||null,[]),r=d.useCallback((o,s)=>{const n=l(o,s);i(g=>({...g,currentProduct:n,categoryProducts:o,error:n?"":"Product not found",isLoading:!1}))},[l]);return d.useEffect(()=>{if(!a||!t){i(s=>({...s,isLoading:!1,error:"Invalid product or category"}));return}i(s=>({...s,isLoading:!0,error:""}));const o=setTimeout(async()=>{try{const s=await F(a);r(s,t)}catch(s){const n=s instanceof Error?s.message:"Unknown error";i(g=>({...g,currentProduct:null,categoryProducts:[],error:`Error loading products: The product category "${a}" does not exist. ${n}`,isLoading:!1}))}},z);return()=>clearTimeout(o)},[a,t,r]),c},U=a=>[...a].sort(()=>.5-Math.random()),V=(a,t,c)=>{const i=a.filter(l=>l.category===t&&l.itemId!==c);return U(i)},Z=({error:a})=>e.jsxs("div",{className:"detailsPage__error-message",children:[e.jsx("span",{children:a}),e.jsx(T,{to:"/",className:"detailsPage__error-link",children:"Go to HomePage"})]}),q=()=>e.jsx("div",{className:"detailsPage",children:e.jsx(O,{})}),ae=()=>{const{allProducts:a}=d.useContext(j),{productId:t=""}=S(),i=I().pathname.split("/")[1],{currentProduct:l,categoryProducts:r,isLoading:o,error:s}=H(i,t),n=l?V(a,i,t):[];return o?e.jsx(q,{}):s||!l?e.jsx("div",{className:"detailsPage",children:e.jsx(Z,{error:s||"Product not found"})}):e.jsxs("div",{className:"detailsPage",children:[e.jsx(B,{productType:i,productName:l.name}),e.jsx(L,{}),e.jsx("h2",{className:"detailsPage__title",children:l.name}),e.jsx(w,{selectedProduct:l,specificProducts:r}),e.jsx(Y,{selectedProduct:l}),n.length>0&&e.jsx("div",{className:"detailsPage__like-block",children:e.jsx(A,{title:"You may also like",products:n,displayType:"with-discount"})})]})};export{ae as ProductDetailsPage};
